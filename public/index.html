<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ³Ø¬ÙŠÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</title>
  <style>
    body { font-family: Tahoma, Arial; direction: rtl; text-align: center; background: #f4f6f9; }
    .box { margin: 30px auto; width: 320px; padding: 20px; background: #fff; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    input { width: 90%; margin: 8px 0; padding: 10px; border: 1px solid #ccc; border-radius: 6px; font-size: 14px; }
    button { width: 95%; margin-top: 10px; padding: 10px; border: none; border-radius: 6px; font-size: 15px; color: #fff; background: linear-gradient(90deg,#007bff,#0056b3); cursor: pointer; transition: 0.3s; }
    button:hover { opacity: 0.9; }
    .toggle { cursor: pointer; color: #007bff; font-weight: bold; }
  </style>
</head>
<body>
  <h2 style="color:#333;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ðŸ‘‹</h2>
  <div class="box" id="registerBox">
    <h3>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
    <input type="text" id="regUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
    <input type="password" id="regPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button onclick="register()">ØªØ³Ø¬ÙŠÙ„</button>
    <p>Ø¹Ù†Ø¯Ùƒ Ø­Ø³Ø§Ø¨ØŸ <span class="toggle" onclick="showLogin()">Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„</span></p>
  </div>

  <div class="box" id="loginBox" style="display:none;">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h3>
    <input type="text" id="loginUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
    <input type="password" id="loginPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <p>Ù„Ø³Ù‡ Ù…Ø¹Ù†Ø¯ÙƒØ´ Ø­Ø³Ø§Ø¨ØŸ <span class="toggle" onclick="showRegister()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</span></p>
  </div>

  <script>
    function showLogin(){ document.getElementById("registerBox").style.display="none"; document.getElementById("loginBox").style.display="block"; }
    function showRegister(){ document.getElementById("registerBox").style.display="block"; document.getElementById("loginBox").style.display="none"; }
    async function register(){
      const username=document.getElementById("regUsername").value;
      const password=document.getElementById("regPassword").value;
      const res=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username,password})});
      const data=await res.json(); alert(data.message||data.error);
    }
    async function login(){
      const username=document.getElementById("loginUsername").value;
      const password=document.getElementById("loginPassword").value;
      const res=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username,password})});
      const data=await res.json();
      if(data.token){ localStorage.setItem("token",data.token); if(data.role==="admin"){window.location="login.html";} else {window.location="orders.html";} }
      else alert(data.error);
    }
  </script>
</body>
</html>
